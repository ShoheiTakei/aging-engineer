# ブログ記事管理機能 ヒアリング記録

**作成日**: 2025-12-28
**ヒアリング実施**: step4 既存情報ベースの差分ヒアリング

## ヒアリング目的

Astro.jsブログプロジェクトのコア機能である「ブログ記事管理機能」について、既存の設計文書（tech-stack.md、フロントエンドテスト基盤設計）を基に、具体的な機能要件、非機能要件、エッジケースを明確化するためのヒアリングを実施しました。

## 質問と回答

### Q1: 記事一覧ページにページネーション（ページ分割）は必要ですか？

**質問日時**: 2025-12-28
**カテゴリ**: 未定義部分詳細化
**背景**: 記事が増えた際のUX向上とパフォーマンス最適化のため

**回答**: 必要

**信頼性への影響**:
- この回答により、REQ-201（ページネーション機能）を追加（信頼性レベル: 🔵）
- 1ページあたりの表示件数を明確化する必要が発生

---

### Q2: 記事のタグ機能について教えてください

**質問日時**: 2025-12-28
**カテゴリ**: 未定義部分詳細化
**背景**: tech-stack.mdでfrontmatterに`tags`フィールドが定義されているが、詳細な仕様が不明

**回答**: タグ機能を実装

**信頼性への影響**:
- この回答により、REQ-301～REQ-303（タグ管理・表示・フィルタリング）を追加（信頼性レベル: 🔵）
- タグページ、タグ一覧、タグフィルタリング機能の実装が確定

---

### Q3: 記事検索機能は必要ですか？

**質問日時**: 2025-12-28
**カテゴリ**: 追加要件
**背景**: ユーザビリティ向上のため、検索機能の必要性を確認

**回答**: 必要

**信頼性への影響**:
- この回答により、REQ-401～REQ-402（記事検索機能）を追加（信頼性レベル: 🔵）
- タイトル・本文からのキーワード検索機能の実装が確定

---

### Q4: 下書き（非公開）記事の機能は必要ですか？

**質問日時**: 2025-12-28
**カテゴリ**: 追加要件
**背景**: 記事の公開前準備・レビューのため

**回答**: 必要

**信頼性への影響**:
- この回答により、REQ-501～REQ-502（下書き機能）を追加（信頼性レベル: 🔵）
- frontmatterで`draft: true`を設定し、非公開記事を管理

---

### Q5: RSS Feedの生成は必要ですか？

**質問日時**: 2025-12-28
**カテゴリ**: 追加要件
**背景**: 読者の購読利便性向上のため

**回答**: 必要

**信頼性への影響**:
- この回答により、REQ-601（RSS Feed生成）を追加（信頼性レベル: 🔵）
- `/rss.xml`エンドポイントでRSS 2.0フィード生成を実装

---

### Q6: 関連記事の表示機能は必要ですか？

**質問日時**: 2025-12-28
**カテゴリ**: 追加要件
**背景**: ユーザーエンゲージメント向上、回遊性向上のため

**回答**: 必要

**信頼性への影響**:
- この回答により、REQ-701（関連記事表示）を追加（信頼性レベル: 🔵）
- タグベースでの関連記事レコメンド機能を実装

---

### Q7: OGP（Open Graph Protocol）画像の設定は必要ですか？

**質問日時**: 2025-12-28
**カテゴリ**: 追加要件
**背景**: SNSシェア時の視覚的な訴求力向上のため

**回答**: 不要

**信頼性への影響**:
- この回答により、OGP画像機能を要件から除外
- 基本的なOGPメタタグ（タイトル、説明）のみを実装

---

### Q8: コメント機能は必要ですか？

**質問日時**: 2025-12-28
**カテゴリ**: 追加要件
**背景**: 読者とのインタラクション機能として

**回答**: 不要

**信頼性への影響**:
- この回答により、コメント機能を要件から除外
- 静的サイトのシンプルさを維持

---

### Q9: 記事の読了時間表示は必要ですか？

**質問日時**: 2025-12-28
**カテゴリ**: 未定義部分詳細化
**背景**: ユーザーが記事を読むのにかかる時間を事前に知ることでUX向上

**回答**: 必要

**信頼性への影響**:
- この回答により、REQ-801（読了時間表示）を追加（信頼性レベル: 🔵）
- 文字数ベースで読了時間を自動計算（日本語: 500文字/分）

---

### Q10: 目次（Table of Contents）の自動生成は必要ですか？

**質問日時**: 2025-12-28
**カテゴリ**: 未定義部分詳細化
**背景**: 長文記事のナビゲーション向上のため

**回答**: 必要

**信頼性への影響**:
- この回答により、REQ-901（目次自動生成）を追加（信頼性レベル: 🔵）
- Markdown見出し（h2, h3）から目次を自動生成

---

### Q11: 記事一覧の1ページあたりの表示件数はどれくらいが適切ですか？

**質問日時**: 2025-12-28
**カテゴリ**: 未定義部分詳細化
**背景**: REQ-201（ページネーション）の具体的な仕様を明確化するため

**回答**: 5件

**信頼性への影響**:
- この回答により、REQ-201の詳細仕様が確定（信頼性レベル: 🔵）
- 1ページあたり5件表示、超高速読み込みを実現

---

### Q12: 記事のソート順序のデフォルトは？

**質問日時**: 2025-12-28
**カテゴリ**: 未定義部分詳細化
**背景**: 記事一覧のデフォルト表示順序を明確化するため

**回答**: 新しい順

**信頼性への影響**:
- この回答により、REQ-202（ソート機能）を追加（信頼性レベル: 🔵）
- 公開日が新しい順（降順）をデフォルトとして設定

---

### Q13: 記事詳細ページのパフォーマンス目標について教えてください

**質問日時**: 2025-12-28
**カテゴリ**: 既存設計確認
**背景**: tech-stack.mdに「Lighthouse 90+点」と記載があるが、本機能でも適用するか確認

**回答**: Lighthouse 90+点維持（推奨）

**信頼性への影響**:
- この回答により、NFR-001（パフォーマンス要件）の信頼性レベルが 🟡 → 🔵 に向上
- tech-stack.mdの品質基準をブログ記事管理機能にも適用することを確認

---

### Q14: SEO対策の優先度について教えてください

**質問日時**: 2025-12-28
**カテゴリ**: 未定義部分詳細化
**背景**: SEO対策の実装範囲を明確化するため

**回答**: 高優先度

**信頼性への影響**:
- この回答により、NFR-101～NFR-104（SEO要件）を追加（信頼性レベル: 🔵）
- メタタグ、OGP、サイトマップ、JSON-LDの実装が確定

---

### Q15: 記事内の画像最適化はどの程度必要ですか？

**質問日時**: 2025-12-28
**カテゴリ**: 既存設計確認
**背景**: tech-stack.mdにCloudflare R2統合が記載されているが、画像最適化の詳細が不明

**回答**: 自動最適化（推奨）

**信頼性への影響**:
- この回答により、NFR-201～NFR-203（画像最適化要件）を追加（信頼性レベル: 🔵）
- Astro Imageコンポーネントを使用したWebP/AVIF変換、レスポンシブ対応を実装

---

### Q16: アクセシビリティ（WCAG準拠）の目標について教えてください

**質問日時**: 2025-12-28
**カテゴリ**: 既存設計確認
**背景**: tech-stack.mdに「WCAG 2.1 AA準拠を目指す」と記載があるが、本機能でも適用するか確認

**回答**: WCAG 2.1 AA準拠（推奨）

**信頼性への影響**:
- この回答により、NFR-301～NFR-304（アクセシビリティ要件）を追加（信頼性レベル: 🔵）
- セマンティックHTML、キーボードナビゲーション、ARIAラベル、代替テキストの実装が確定

---

### Q17: 記事が存在しない場合の表示について教えてください

**質問日時**: 2025-12-28
**カテゴリ**: エッジケース確認
**背景**: 空状態のUX設計を明確化するため

**回答**: 「記事がありません」メッセージ表示

**信頼性への影響**:
- この回答により、EDGE-001（空状態表示）を追加（信頼性レベル: 🔵）
- ユーザーフレンドリーなメッセージ表示を実装

---

### Q18: Markdownのシンタックスハイライトは必要ですか？

**質問日時**: 2025-12-28
**カテゴリ**: 未定義部分詳細化
**背景**: コードブロックの視認性向上のため

**回答**: 必要

**信頼性への影響**:
- この回答により、REQ-111（シンタックスハイライト）を追加（信頼性レベル: 🔵）
- Shiki（Astro標準）を使用したシンタックスハイライトを実装

---

## ヒアリング結果サマリー

### 確認できた事項

**機能要件**:
- ✅ ページネーション: 必要（5件/ページ）
- ✅ タグ機能: 実装（タグ管理、タグページ、フィルタリング）
- ✅ 記事検索: 必要（タイトル・本文からのキーワード検索）
- ✅ 下書き機能: 必要（`draft: true`で非公開管理）
- ✅ RSS Feed: 必要（`/rss.xml`でRSS 2.0フィード生成）
- ✅ 関連記事表示: 必要（タグベースレコメンド）
- ✅ 読了時間表示: 必要（文字数ベース自動計算）
- ✅ 目次自動生成: 必要（h2, h3から生成）
- ✅ ソート順: 新しい順（デフォルト）
- ✅ シンタックスハイライト: 必要（Shiki使用）

**非機能要件**:
- ✅ Lighthouse 90+点維持（tech-stack.md品質基準）
- ✅ SEO対策: 高優先度（メタタグ、サイトマップ、JSON-LD）
- ✅ 画像最適化: 自動最適化（Astro Image、WebP/AVIF）
- ✅ アクセシビリティ: WCAG 2.1 AA準拠（tech-stack.md品質基準）

**除外事項**:
- ❌ OGP画像: 不要（基本的なOGPメタタグのみ）
- ❌ コメント機能: 不要

**エッジケース**:
- ✅ 記事が存在しない場合: メッセージ表示

### 追加/変更要件

**新規追加された要件（18項目）**:
1. REQ-201: ページネーション機能（5件/ページ）
2. REQ-202: ソート機能（新しい順デフォルト）
3. REQ-301～REQ-303: タグ機能（管理、表示、フィルタリング）
4. REQ-401～REQ-402: 記事検索機能
5. REQ-501～REQ-502: 下書き機能
6. REQ-601: RSS Feed生成
7. REQ-701: 関連記事表示
8. REQ-801: 読了時間表示
9. REQ-901: 目次自動生成
10. REQ-111: シンタックスハイライト
11. NFR-001: パフォーマンス要件（Lighthouse 90+）
12. NFR-101～NFR-104: SEO要件
13. NFR-201～NFR-203: 画像最適化要件
14. NFR-301～NFR-304: アクセシビリティ要件
15. EDGE-001: 空状態表示

**既存設計からの変更**: なし

### 残課題

- 検索機能の実装方法（クライアントサイド検索 vs ビルド時インデックス生成）の詳細化
- 関連記事のレコメンドアルゴリズム詳細（タグ一致数、公開日等）
- 目次の表示位置・デザイン（サイドバー固定 vs 記事上部）

### 信頼性レベル分布

**ヒアリング前**:
- 🔵 青信号: 5件（tech-stack.mdからの基本要件のみ）
- 🟡 黄信号: 10件（推測ベースの要件）
- 🔴 赤信号: 15件（未定義の要件）

**ヒアリング後**:
- 🔵 青信号: 45件 (+40件)
- 🟡 黄信号: 0件 (-10件)
- 🔴 赤信号: 0件 (-15件)

## 関連文書

- **要件定義書**: [requirements.md](requirements.md)
- **ユーザストーリー**: [user-stories.md](user-stories.md)
- **受け入れ基準**: [acceptance-criteria.md](acceptance-criteria.md)
- **技術スタック定義**: [../../tech-stack.md](../../tech-stack.md)
- **フロントエンドテスト基盤設計**: [../../design/frontend-test-infra/](../../design/frontend-test-infra/)
