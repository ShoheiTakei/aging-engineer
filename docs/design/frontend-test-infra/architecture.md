# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆåŸºç›¤ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ

**ä½œæˆæ—¥**: 2025-12-28
**é–¢é€£è¦ä»¶å®šç¾©**: ãªã—ï¼ˆæ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼‰
**ãƒ’ã‚¢ãƒªãƒ³ã‚°è¨˜éŒ²**: [design-interview.md](design-interview.md)

**ã€ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«å‡¡ä¾‹ã€‘**:
- ğŸ”µ **é’ä¿¡å·**: tech-stack.mdã€Astroå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã€Vitest/Playwrightå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚è€ƒã«ã—ãŸç¢ºå®Ÿãªè¨­è¨ˆ
- ğŸŸ¡ **é»„ä¿¡å·**: ä¸€èˆ¬çš„ãªãƒ†ã‚¹ãƒˆãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã‹ã‚‰å¦¥å½“ãªæ¨æ¸¬ã«ã‚ˆã‚‹è¨­è¨ˆ
- ğŸ”´ **èµ¤ä¿¡å·**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰ã®æ¨æ¸¬ã«ã‚ˆã‚‹è¨­è¨ˆï¼ˆè¦ç¢ºèªï¼‰

---

## ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦ ğŸ”µ

**ä¿¡é ¼æ€§**: ğŸ”µ *tech-stack.mdãƒ»ãƒ’ã‚¢ãƒªãƒ³ã‚°çµæœã‚ˆã‚Š*

Astro.jsãƒ–ãƒ­ã‚°ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå‘ã‘ã®åŒ…æ‹¬çš„ãªãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆåŸºç›¤ã‚’æ§‹ç¯‰ã—ã¾ã™ã€‚å˜ä½“ãƒ†ã‚¹ãƒˆï¼ˆVitestï¼‰ã¨E2Eãƒ†ã‚¹ãƒˆï¼ˆPlaywrightï¼‰ã‚’çµ±åˆã—ã€ä»¥ä¸‹ã®ç¯„å›²ã‚’ã‚«ãƒãƒ¼ã—ã¾ã™ï¼š

- **Astroã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ** (.astro): ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ãƒ†ã‚¹ãƒˆ
- **TypeScriptãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£**: ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã€æ—¥ä»˜ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆç­‰ã®å˜ä½“ãƒ†ã‚¹ãƒˆ
- **Content Collections API**: ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ãƒ‘ãƒ¼ã‚¹ã¨ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
- **Cloudflare R2çµ±åˆ**: ç”»åƒURLç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯

## ãƒ†ã‚¹ãƒˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‘ã‚¿ãƒ¼ãƒ³ ğŸ”µ

**ä¿¡é ¼æ€§**: ğŸ”µ *Vitest/Playwrightå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ»Astroãƒ†ã‚¹ãƒˆãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã‚ˆã‚Š*

### ãƒ†ã‚¹ãƒˆéšå±¤

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         E2Eãƒ†ã‚¹ãƒˆ (Playwright)          â”‚  â† ãƒ–ãƒ©ã‚¦ã‚¶ã§ã®çµ±åˆãƒ†ã‚¹ãƒˆ
â”‚     ãƒ“ãƒ«ãƒ‰æ¸ˆã¿é™çš„ã‚µã‚¤ãƒˆã®ãƒ†ã‚¹ãƒˆ         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ†ã‚¹ãƒˆ (Vitest)        â”‚  â† Astroã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®
â”‚   Astro Testing Libraryä½¿ç”¨            â”‚     ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ãƒ†ã‚¹ãƒˆ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      å˜ä½“ãƒ†ã‚¹ãƒˆ (Vitest)                â”‚  â† ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°ã€
â”‚   ãƒ¢ãƒƒã‚¯ãƒ»ã‚¹ã‚¿ãƒ–ã‚’æ´»ç”¨                   â”‚     ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã®ãƒ†ã‚¹ãƒˆ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### é¸æŠç†ç”±
- **Vitest**: Astroå…¬å¼æ¨å¥¨ã€Viteçµ±åˆã€é«˜é€Ÿã€TypeScript/ESMãƒã‚¤ãƒ†ã‚£ãƒ–ã‚µãƒãƒ¼ãƒˆ
- **Playwright**: Astroå…¬å¼æ¨å¥¨ã€ã‚¯ãƒ­ã‚¹ãƒ–ãƒ©ã‚¦ã‚¶ãƒ†ã‚¹ãƒˆã€ä¿¡é ¼æ€§é«˜ã€ä¸¦åˆ—å®Ÿè¡Œ

## ãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ«æ§‹æˆ

### å˜ä½“ãƒ†ã‚¹ãƒˆãƒ»ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ†ã‚¹ãƒˆ ğŸ”µ

**ä¿¡é ¼æ€§**: ğŸ”µ *tech-stack.mdãƒ»Astroå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚ˆã‚Š*

- **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: Vitest 2+
- **ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³**: Vitestæ¨™æº– (expect)
- **ãƒ¢ãƒƒã‚¯**: Vitestæ¨™æº– (vi.mock, vi.fn)
- **ã‚«ãƒãƒ¬ãƒƒã‚¸**: @vitest/coverage-v8
- **DOMç’°å¢ƒ**: happy-domï¼ˆè»½é‡ãƒ»é«˜é€Ÿï¼‰ã¾ãŸã¯ jsdom

### E2Eãƒ†ã‚¹ãƒˆ ğŸ”µ

**ä¿¡é ¼æ€§**: ğŸ”µ *tech-stack.mdãƒ»Playwrightå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚ˆã‚Š*

- **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: Playwright 1.49+
- **ãƒ–ãƒ©ã‚¦ã‚¶**: Chromium, Firefox, WebKitï¼ˆã‚¯ãƒ­ã‚¹ãƒ–ãƒ©ã‚¦ã‚¶ãƒ†ã‚¹ãƒˆï¼‰
- **ãƒ¬ãƒãƒ¼ãƒˆ**: HTML Reporter, JUnit XML

### Lighthouseãƒ†ã‚¹ãƒˆï¼ˆãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ»å“è³ªç›£è¦–ï¼‰ ğŸ”µ

**ä¿¡é ¼æ€§**: ğŸ”µ *tech-stack.mdå“è³ªåŸºæº–ãƒ»ãƒ¦ãƒ¼ã‚¶ãƒ¼è¦ä»¶ã‚ˆã‚Š*

- **ãƒ„ãƒ¼ãƒ«**: Lighthouse CI
- **æ¸¬å®šã‚«ãƒ†ã‚´ãƒª**:
  - **Performanceï¼ˆãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ï¼‰**: 90+ç‚¹
  - **Accessibilityï¼ˆã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ï¼‰**: 90+ç‚¹
  - **Best Practicesï¼ˆãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ï¼‰**: 90+ç‚¹
  - **SEO**: 90+ç‚¹
- **å®Ÿè¡Œæ–¹æ³•**: GitHub Actionsã§è‡ªå‹•å®Ÿè¡Œ
- **ãƒ¬ãƒãƒ¼ãƒˆ**: Lighthouseãƒ¬ãƒãƒ¼ãƒˆï¼ˆHTML/JSONï¼‰ã€ã‚¹ã‚³ã‚¢å±¥æ­´ã®å¯è¦–åŒ–

### Storybookï¼ˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚«ã‚¿ãƒ­ã‚°ãƒ»ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãƒ†ã‚¹ãƒˆï¼‰ ğŸ”µ

**ä¿¡é ¼æ€§**: ğŸ”µ *ãƒ¦ãƒ¼ã‚¶ãƒ¼è¦ä»¶ã‚ˆã‚Š*

- **ãƒ„ãƒ¼ãƒ«**: Storybook 8+
- **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: `@storybook/web-components-vite`ï¼ˆAstroçµ±åˆï¼‰
- **ã‚¢ãƒ‰ã‚ªãƒ³**:
  - `@storybook/addon-essentials`: åŸºæœ¬æ©Ÿèƒ½ï¼ˆControls, Actions, Docsç­‰ï¼‰
  - `@storybook/addon-a11y`: ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆ
  - `@storybook/experimental-addon-test`: Vitestçµ±åˆ
- **ç”¨é€”**:
  - ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ç‹¬ç«‹é–‹ç™ºç’°å¢ƒ
  - UIçŠ¶æ…‹ã®å¯è¦–åŒ–ï¼ˆãƒ©ã‚¤ãƒˆ/ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ç­‰ï¼‰
  - ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–
  - ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãƒªã‚°ãƒ¬ãƒƒã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆï¼ˆå°†æ¥çš„ã«è¿½åŠ å¯èƒ½ï¼‰
- **å®Ÿè¡Œæ–¹æ³•**: `pnpm storybook` ã§ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºã€`pnpm build-storybook` ã§é™çš„ãƒ“ãƒ«ãƒ‰

**Storybookã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ†ã‚¹ãƒˆã®å½¹å‰²åˆ†æ‹…**:
- **Storybookã‚¹ãƒˆãƒ¼ãƒªãƒ¼**: UIçŠ¶æ…‹ã®å¯è¦–åŒ–ã€ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ç¢ºèªã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–
- **Vitestã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ†ã‚¹ãƒˆ**: ãƒ­ã‚¸ãƒƒã‚¯ãƒ†ã‚¹ãƒˆã€ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æ¤œè¨¼ã€CI/CDã§ã®è‡ªå‹•ãƒ†ã‚¹ãƒˆ

### ãã®ä»–ã®ãƒ„ãƒ¼ãƒ« ğŸŸ¡

**ä¿¡é ¼æ€§**: ğŸŸ¡ *ãƒ†ã‚¹ãƒˆãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã‹ã‚‰æ¨æ¸¬*

- **ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿**: @faker-js/fakerï¼ˆãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆï¼‰
- **æ—¥ä»˜ãƒ¢ãƒƒã‚¯**: vitestæ¨™æº–ã® vi.setSystemTime
- **API

ãƒ¢ãƒƒã‚¯**: ä¸è¦ï¼ˆR2çµ±åˆã®ã¿ãƒ¢ãƒƒã‚¯åŒ–ï¼‰

## ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€  ğŸ”µ

**ä¿¡é ¼æ€§**: ğŸ”µ *Astroãƒ»Vitestãƒ»Playwrightãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã‚ˆã‚Š*

```
./
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/          # Astroã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ Header.astro
â”‚   â”‚   â””â”€â”€ Header.test.ts   # âŒ æ¨å¥¨ã—ãªã„ï¼ˆãƒ†ã‚¹ãƒˆã¯åˆ†é›¢ï¼‰
â”‚   â”œâ”€â”€ utils/               # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
â”‚   â”‚   â”œâ”€â”€ r2.ts
â”‚   â”‚   â””â”€â”€ date.ts
â”‚   â””â”€â”€ content/
â”‚       â””â”€â”€ config.ts        # Content Collectionsè¨­å®š
â”‚
â”œâ”€â”€ tests/                   # ãƒ†ã‚¹ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆç›´ä¸‹ï¼‰
â”‚   â”œâ”€â”€ unit/                # å˜ä½“ãƒ†ã‚¹ãƒˆ
â”‚   â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”‚   â”œâ”€â”€ r2.test.ts
â”‚   â”‚   â”‚   â””â”€â”€ date.test.ts
â”‚   â”‚   â””â”€â”€ content/
â”‚   â”‚       â””â”€â”€ config.test.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ component/           # ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ†ã‚¹ãƒˆ
â”‚   â”‚   â”œâ”€â”€ Header.test.ts
â”‚   â”‚   â”œâ”€â”€ Footer.test.ts
â”‚   â”‚   â”œâ”€â”€ BlogCard.test.ts
â”‚   â”‚   â””â”€â”€ ThemeToggle.test.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ e2e/                 # E2Eãƒ†ã‚¹ãƒˆ
â”‚   â”‚   â”œâ”€â”€ home.spec.ts
â”‚   â”‚   â”œâ”€â”€ blog-list.spec.ts
â”‚   â”‚   â”œâ”€â”€ blog-post.spec.ts
â”‚   â”‚   â””â”€â”€ theme-toggle.spec.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ fixtures/            # ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿
â”‚   â”‚   â”œâ”€â”€ content/
â”‚   â”‚   â”‚   â””â”€â”€ sample-post.md
â”‚   â”‚   â””â”€â”€ images/
â”‚   â”‚       â””â”€â”€ sample-image.jpg
â”‚   â”‚
â”‚   â””â”€â”€ mocks/               # ãƒ¢ãƒƒã‚¯å®šç¾©
â”‚       â””â”€â”€ r2.mock.ts
â”‚
â”œâ”€â”€ vitest.config.ts         # Vitestè¨­å®š
â”œâ”€â”€ playwright.config.ts     # Playwrightè¨­å®š
â””â”€â”€ vitest.workspace.ts      # Vitestãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹è¨­å®šï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
```

**é‡è¦ãªè¨­è¨ˆåˆ¤æ–­**:
- `tests/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆç›´ä¸‹ã«é…ç½®ï¼ˆAstroæ¨å¥¨ï¼‰
- ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«å‘½å: `*.test.ts` (å˜ä½“ãƒ»ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ), `*.spec.ts` (E2E)
- ãƒ†ã‚¹ãƒˆã¨ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’åˆ†é›¢ï¼ˆä¿å®ˆæ€§å‘ä¸Šï¼‰

## ãƒ¢ãƒƒã‚¯æˆ¦ç•¥

### åŸºæœ¬æ–¹é‡ ğŸŸ¡

**ä¿¡é ¼æ€§**: ğŸŸ¡ *ãƒ†ã‚¹ãƒˆãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã‹ã‚‰æ¨æ¸¬*

1. **å˜ä½“ãƒ†ã‚¹ãƒˆ**: å¤–éƒ¨ä¾å­˜ã‚’å®Œå…¨ã«ãƒ¢ãƒƒã‚¯åŒ–
2. **ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ†ã‚¹ãƒˆ**: å¿…è¦æœ€å°é™ã®ãƒ¢ãƒƒã‚¯
3. **E2Eãƒ†ã‚¹ãƒˆ**: ãƒ¢ãƒƒã‚¯ãªã—ï¼ˆå®Ÿç’°å¢ƒã«è¿‘ã„çŠ¶æ…‹ã§ãƒ†ã‚¹ãƒˆï¼‰

### Cloudflare R2ã®ãƒ¢ãƒƒã‚¯ ğŸ”µ

**ä¿¡é ¼æ€§**: ğŸ”µ *ãƒ’ã‚¢ãƒªãƒ³ã‚°çµæœãƒ»è¨­è¨ˆåˆ¤æ–­ã‚ˆã‚Š*

```typescript
// tests/mocks/r2.mock.ts
import { vi } from 'vitest';

export const mockGetR2ImageUrl = vi.fn((key: string): string => {
  return `https://mock-r2-url.com/${key}`;
});

// ä½¿ç”¨ä¾‹
vi.mock('@/utils/r2', () => ({
  getR2ImageUrl: mockGetR2ImageUrl,
}));
```

### Content Collectionsã®ãƒ¢ãƒƒã‚¯ ğŸŸ¡

**ä¿¡é ¼æ€§**: ğŸŸ¡ *Astroãƒ†ã‚¹ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³ã‹ã‚‰æ¨æ¸¬*

```typescript
// tests/mocks/content.mock.ts
import type { CollectionEntry } from 'astro:content';

export const mockBlogPost: CollectionEntry<'blog'> = {
  id: 'test-post.md',
  slug: 'test-post',
  body: 'Test content',
  collection: 'blog',
  data: {
    title: 'Test Post',
    description: 'Test Description',
    pubDate: new Date('2025-01-01'),
    coverImage: 'test-image.jpg',
    tags: ['test', 'mock'],
  },
};
```

### ç’°å¢ƒå¤‰æ•°ã®ãƒ¢ãƒƒã‚¯ ğŸ”µ

**ä¿¡é ¼æ€§**: ğŸ”µ *Vitestãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚ˆã‚Š*

```typescript
// vitest.config.ts
export default defineConfig({
  test: {
    env: {
      PUBLIC_R2_URL: 'https://test-r2-url.com',
    },
  },
});
```

## ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸åŸºæº–

### ç›®æ¨™ã‚«ãƒãƒ¬ãƒƒã‚¸ ğŸŸ¡

**ä¿¡é ¼æ€§**: ğŸŸ¡ *tech-stack.mdã®å“è³ªåŸºæº–ã‹ã‚‰æ¨æ¸¬*

- **å…¨ä½“**: 80%ä»¥ä¸Šï¼ˆtech-stack.mdã®å“è³ªåŸºæº–ã«æº–æ‹ ï¼‰
- **ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°**: 90%ä»¥ä¸Šï¼ˆé‡è¦ãªãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ï¼‰
- **Astroã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**: 70%ä»¥ä¸Šï¼ˆè¦–è¦šçš„è¦ç´ ãŒå¤šã„ãŸã‚ï¼‰
- **Content Collections**: 85%ä»¥ä¸Šï¼ˆå‹å®‰å…¨æ€§ã®ç¢ºèªãŒé‡è¦ï¼‰

### ã‚«ãƒãƒ¬ãƒƒã‚¸æ¸¬å®šæ–¹æ³• ğŸ”µ

**ä¿¡é ¼æ€§**: ğŸ”µ *Vitestãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚ˆã‚Š*

```bash
# ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
pnpm vitest --coverage

# ã‚«ãƒãƒ¬ãƒƒã‚¸é–¾å€¤ãƒã‚§ãƒƒã‚¯
pnpm vitest --coverage --coverage.thresholds.lines=80
```

## Lighthouseã‚¹ã‚³ã‚¢åŸºæº–

### ç›®æ¨™ã‚¹ã‚³ã‚¢ ğŸ”µ

**ä¿¡é ¼æ€§**: ğŸ”µ *tech-stack.mdå“è³ªåŸºæº–ãƒ»ãƒ¦ãƒ¼ã‚¶ãƒ¼è¦ä»¶ã‚ˆã‚Š*

- **Performanceï¼ˆãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ï¼‰**: 90+ç‚¹
- **Accessibilityï¼ˆã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ï¼‰**: 90+ç‚¹
- **Best Practicesï¼ˆãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ï¼‰**: 90+ç‚¹
- **SEO**: 90+ç‚¹

### ã‚¹ã‚³ã‚¢æ¸¬å®šæ–¹æ³• ğŸ”µ

**ä¿¡é ¼æ€§**: ğŸ”µ *Lighthouse CIå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚ˆã‚Š*

```bash
# Lighthouse CIã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pnpm add -D @lhci/cli

# ãƒ­ãƒ¼ã‚«ãƒ«ã§Lighthouseå®Ÿè¡Œ
pnpm lhci autorun

# CI/CDã§ã®è‡ªå‹•å®Ÿè¡Œï¼ˆGitHub Actionsï¼‰
# .github/workflows/lighthouse.yml ã§è¨­å®š
```

### ã‚¹ã‚³ã‚¢æ”¹å–„æ™‚ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ ğŸŸ¡

**ä¿¡é ¼æ€§**: ğŸŸ¡ *Lighthouseãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã‹ã‚‰æ¨æ¸¬*

- ã‚¹ã‚³ã‚¢ãŒé–¾å€¤ï¼ˆ90ç‚¹ï¼‰ã‚’ä¸‹å›ã£ãŸå ´åˆã€ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’è‡ªå‹•çš„ã«ãƒ–ãƒ­ãƒƒã‚¯
- Lighthouseãƒ¬ãƒãƒ¼ãƒˆã‚’ã‚³ãƒ¡ãƒ³ãƒˆã¨ã—ã¦è‡ªå‹•æŠ•ç¨¿
- éå»ã®ã‚¹ã‚³ã‚¢ã¨ã®æ¯”è¼ƒã‚’è¡¨ç¤º

## éæ©Ÿèƒ½è¦ä»¶ã®å®Ÿç¾æ–¹æ³•

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ ğŸ”µ

**ä¿¡é ¼æ€§**: ğŸ”µ *Vitest/Playwrightãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã‚ˆã‚Š*

- **ä¸¦åˆ—å®Ÿè¡Œ**: Vitestã®ä¸¦åˆ—å®Ÿè¡Œæ©Ÿèƒ½ã‚’æ´»ç”¨
- **ãƒ†ã‚¹ãƒˆéš”é›¢**: å„ãƒ†ã‚¹ãƒˆã‚’å®Œå…¨ã«ç‹¬ç«‹ã•ã›ã¦ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’æœ‰åŠ¹æ´»ç”¨
- **é«˜é€ŸåŒ–æˆ¦ç•¥**:
  - happy-domä½¿ç”¨ï¼ˆjsdomã‚ˆã‚Šé«˜é€Ÿï¼‰
  - ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆã®é©åˆ‡ãªåˆ†å‰²
  - CI/CDã§ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ´»ç”¨

### ãƒ¡ãƒ³ãƒ†ãƒŠãƒ“ãƒªãƒ†ã‚£ ğŸŸ¡

**ä¿¡é ¼æ€§**: ğŸŸ¡ *ãƒ†ã‚¹ãƒˆãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã‹ã‚‰æ¨æ¸¬*

- **å‘½åè¦å‰‡**:
  - ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«: `{å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«å}.test.ts` or `{æ©Ÿèƒ½å}.spec.ts`
  - ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹: `should {æœŸå¾…ã™ã‚‹å‹•ä½œ} when {æ¡ä»¶}`
- **ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ç®¡ç†**: `tests/fixtures/` ã«é›†ç´„
- **ãƒ¢ãƒƒã‚¯ç®¡ç†**: `tests/mocks/` ã«é›†ç´„

### ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ ğŸŸ¡

**ä¿¡é ¼æ€§**: ğŸŸ¡ *ãƒ†ã‚¹ãƒˆãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã‹ã‚‰æ¨æ¸¬*

- **ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆåˆ†å‰²**: unit, component, e2e ã§æ˜ç¢ºã«åˆ†é›¢
- **ä¸¦åˆ—å®Ÿè¡Œ**: Vitest/Playwrightã®ä¸¦åˆ—å®Ÿè¡Œæ©Ÿèƒ½ã‚’æ´»ç”¨
- **CI/CDãƒãƒˆãƒªãƒƒã‚¯ã‚¹**: è¤‡æ•°ã®Nodeãƒãƒ¼ã‚¸ãƒ§ãƒ³ãƒ»ãƒ–ãƒ©ã‚¦ã‚¶ã§ãƒ†ã‚¹ãƒˆ

## CI/CDçµ±åˆ

### GitHub Actionsæ¨å¥¨è¨­å®š ğŸŸ¡

**ä¿¡é ¼æ€§**: ğŸŸ¡ *tech-stack.mdãƒ»CI/CDãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã‹ã‚‰æ¨æ¸¬*

```yaml
# .github/workflows/test.yml
name: Test

on:
  pull_request:
  push:
    branches: [main]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: pnpm/action-setup@v2
        with:
          version: 9
      - uses: actions/setup-node@v4
        with:
          node-version: '22'
          cache: 'pnpm'

      - name: Install dependencies
        run: pnpm install

      - name: Run unit tests
        run: pnpm vitest run --coverage

      - name: Install Playwright browsers
        run: pnpm playwright install --with-deps

      - name: Run E2E tests
        run: pnpm playwright test

      - name: Build for Lighthouse
        run: pnpm build

      - name: Run Lighthouse CI
        uses: treosh/lighthouse-ci-action@v11
        with:
          urls: |
            http://localhost:4321
            http://localhost:4321/blog
          uploadArtifacts: true
          temporaryPublicStorage: true
          runs: 3

      - name: Upload coverage
        uses: codecov/codecov-action@v3
```

### ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

- **ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**: å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œï¼ˆå˜ä½“ + E2E + Lighthouseï¼‰
- **mainãƒ–ãƒ©ãƒ³ãƒ**: å…¨ãƒ†ã‚¹ãƒˆ + ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆ + Lighthouseã‚¹ã‚³ã‚¢å±¥æ­´
- **å®šæœŸå®Ÿè¡Œ**: æ¯æ—¥å¤œé–“ã«å…¨ãƒ–ãƒ©ã‚¦ã‚¶ã§E2Eãƒ†ã‚¹ãƒˆ + Lighthouseãƒ•ãƒ«ã‚¹ã‚­ãƒ£ãƒ³

## æŠ€è¡“çš„åˆ¶ç´„

### Astroå›ºæœ‰ã®åˆ¶ç´„ ğŸ”µ

**ä¿¡é ¼æ€§**: ğŸ”µ *Astroå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚ˆã‚Š*

- Astroã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆ.astroï¼‰ã¯ç›´æ¥å®Ÿè¡Œä¸å¯ â†’ ãƒ“ãƒ«ãƒ‰æ¸ˆã¿HTMLã‚’ãƒ†ã‚¹ãƒˆ
- Content Collections APIã¯ãƒ“ãƒ«ãƒ‰æ™‚ã«è©•ä¾¡ â†’ ãƒ¢ãƒƒã‚¯ãŒå¿…è¦
- é™çš„ã‚µã‚¤ãƒˆç”Ÿæˆã®ãŸã‚ã€ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ãƒ†ã‚¹ãƒˆã¯é™å®šçš„

### ãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ«ã®åˆ¶ç´„ ğŸ”µ

**ä¿¡é ¼æ€§**: ğŸ”µ *Vitest/Playwrightãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚ˆã‚Š*

- Vitestã¯ãƒ–ãƒ©ã‚¦ã‚¶ç’°å¢ƒã®å®Œå…¨å†ç¾ã¯ä¸å¯ â†’ E2Eãƒ†ã‚¹ãƒˆã§è£œå®Œ
- Playwrightã¯ãƒ“ãƒ«ãƒ‰å¾Œã®é™çš„ãƒ•ã‚¡ã‚¤ãƒ«ãŒå¿…è¦ â†’ `pnpm build` ãŒå‰æ

### Storybookã®åˆ¶ç´„ ğŸŸ¡

**ä¿¡é ¼æ€§**: ğŸŸ¡ *Storybookãƒ»Astroçµ±åˆã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã‹ã‚‰æ¨æ¸¬*

- Astroã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆ.astroï¼‰ã¯ç›´æ¥ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ãªã„ â†’ Web Componentså½¢å¼ã§ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã‚’è¨˜è¿°
- ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰åˆ‡ã‚Šæ›¿ãˆã¯Storybookå†…ã§æ‰‹å‹•è¨­å®šãŒå¿…è¦ â†’ `backgrounds` ã‚¢ãƒ‰ã‚ªãƒ³ã§å¯¾å¿œ
- Astroå›ºæœ‰ã®æ©Ÿèƒ½ï¼ˆContent Collectionsç­‰ï¼‰ã¯Storybookã§å†ç¾å›°é›£ â†’ ãƒ¢ãƒƒã‚¯ã‚’æ´»ç”¨
- ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãƒªã‚°ãƒ¬ãƒƒã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆã¯è¿½åŠ ãƒ„ãƒ¼ãƒ«ï¼ˆChromaticç­‰ï¼‰ãŒå¿…è¦

## é–¢é€£æ–‡æ›¸

- **ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼**: [dataflow.md](dataflow.md)
- **ãƒ†ã‚¹ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³**: [test-patterns.md](test-patterns.md)
- **Vitestè¨­å®š**: [vitest.config.example.ts](vitest.config.example.ts)
- **Playwrightè¨­å®š**: [playwright.config.example.ts](playwright.config.example.ts)
- **æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯**: [tech-stack.md](../../tech-stack.md)

## ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«ã‚µãƒãƒªãƒ¼

- ğŸ”µ é’ä¿¡å·: 19ä»¶ (73%)
- ğŸŸ¡ é»„ä¿¡å·: 7ä»¶ (27%)
- ğŸ”´ èµ¤ä¿¡å·: 0ä»¶ (0%)

**å“è³ªè©•ä¾¡**: é«˜å“è³ª
- tech-stack.mdã€Astro/Vitest/Playwright/Storybookå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«åŸºã¥ã„ãŸä¿¡é ¼æ€§ã®é«˜ã„è¨­è¨ˆ
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ’ã‚¢ãƒªãƒ³ã‚°ã§ä¸»è¦ãªè¨­è¨ˆåˆ¤æ–­ã‚’ç¢ºå®šï¼ˆStorybookã«ã‚ˆã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆç®¡ç†ã‚’å«ã‚€ï¼‰
- ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã‚’å‚ç…§ã—ãŸæ¨å¥¨è¨­å®šã‚’æä¾›
