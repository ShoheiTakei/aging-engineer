---
/**
 * BaseLayout - åŸºæœ¬ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
 *
 * å…¨ãƒšãƒ¼ã‚¸ã§ä½¿ç”¨ã™ã‚‹åŸºæœ¬çš„ãªHTMLæ§‹é€ ã‚’æä¾›ã—ã¾ã™ã€‚
 *
 * è¦ä»¶:
 * - NFR-301: ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯HTMLä½¿ç”¨
 * - NFR-101ï½NFR-104: SEOå¯¾å¿œï¼ˆãƒ¡ã‚¿ã‚¿ã‚°ã€OGPã€Twitter Cardã€JSON-LDï¼‰
 * - NFR-302: ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³å¯¾å¿œ
 * - NFR-303: ARIAãƒ©ãƒ™ãƒ«é©åˆ‡ãªè¨­å®š
 *
 * ä¿¡é ¼æ€§: ğŸ”µ requirements.mdãƒ»architecture.mdã‚ˆã‚Š
 */

import '../styles/global.css';
import SEO from '../components/SEO.astro';

interface Props {
  /** ãƒšãƒ¼ã‚¸ã‚¿ã‚¤ãƒˆãƒ«ï¼ˆå¿…é ˆï¼‰ */
  title: string;
  /** ãƒšãƒ¼ã‚¸ã®èª¬æ˜ï¼ˆå¿…é ˆï¼‰ */
  description: string;
  /** OGPç”¨URLï¼ˆä»»æ„ï¼‰ */
  url?: string;
  /** OGPã‚¿ã‚¤ãƒ—ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: websiteï¼‰ */
  type?: 'website' | 'article';
  /** OGPç”»åƒURLï¼ˆä»»æ„ï¼‰ */
  image?: string;
  /** å…¬é–‹æ—¥ï¼ˆè¨˜äº‹ç”¨ï¼‰ */
  publishedTime?: Date;
  /** æ›´æ–°æ—¥ï¼ˆè¨˜äº‹ç”¨ï¼‰ */
  modifiedTime?: Date;
  /** ã‚¿ã‚°ï¼ˆè¨˜äº‹ç”¨ï¼‰ */
  tags?: string[];
  /** æ­£è¦URL */
  canonicalUrl?: string;
  /** noindexè¨­å®š */
  noindex?: boolean;
}

const {
  title,
  description,
  url,
  type = 'website',
  image,
  publishedTime,
  modifiedTime,
  tags,
  canonicalUrl,
  noindex,
} = Astro.props;

const faviconBase = '/assets/favicons';
---

<!doctype html>
<html lang="ja">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />

		<!--
			ã€ãƒ†ãƒ¼ãƒåˆæœŸåŒ–ã‚¹ã‚¯ãƒªãƒ—ãƒˆã€‘ï¼ˆTASK-0005å¯¾å¿œï¼‰
			- ãƒ•ãƒ©ãƒƒã‚·ãƒ¥é˜²æ­¢: ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã®ã¡ã‚‰ã¤ãã‚’é˜²æ­¢ã™ã‚‹ãŸã‚ã€headå†…ã§is:inlineã§å³æ™‚å®Ÿè¡Œ
			- localStorage: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä»¥å‰ã®é¸æŠã‚’å¾©å…ƒ
			- prefers-color-scheme: ã‚·ã‚¹ãƒ†ãƒ è¨­å®šã‚’ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã¨ã—ã¦ä½¿ç”¨
			- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ï¼ˆtech-stack.mdè¦ä»¶ï¼‰
			ğŸ”µ ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«: ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹å®šç¾©æ›¸ã€è¦ä»¶å®šç¾©æ›¸ã«åŸºã¥ãå®Ÿè£…
		-->
		<script is:inline>
			// ã€ãƒ†ãƒ¼ãƒåˆæœŸåŒ–å‡¦ç†ã€‘: ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«å³åº§ã«å®Ÿè¡Œ
			(function() {
				// ã€localStorageç¢ºèªã€‘: ä»¥å‰ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼é¸æŠã‚’ç¢ºèª
				var storedTheme = localStorage.getItem('theme');

				// ã€ã‚·ã‚¹ãƒ†ãƒ è¨­å®šç¢ºèªã€‘: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®OSã®ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰è¨­å®šã‚’ç¢ºèª
				var prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

				// ã€ãƒ†ãƒ¼ãƒæ±ºå®šãƒ­ã‚¸ãƒƒã‚¯ã€‘:
				// å„ªå…ˆé †ä½: localStorage > ã‚·ã‚¹ãƒ†ãƒ è¨­å®š > ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼ˆãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ï¼‰
				// 1. localStorageã«'light'ãŒè¨­å®š â†’ ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰
				// 2. localStorageã«'dark'ãŒè¨­å®š â†’ ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰
				// 3. localStorageæœªè¨­å®šã§ã‚·ã‚¹ãƒ†ãƒ ãŒãƒ©ã‚¤ãƒˆ â†’ ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰
				// 4. ãã‚Œä»¥å¤– â†’ ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ï¼ˆtech-stack.mdè¦ä»¶ï¼‰

				// ã€ã‚¯ãƒ©ã‚¹é©ç”¨ã€‘: htmlè¦ç´ ã«darkã‚¯ãƒ©ã‚¹ã‚’è¿½åŠ /å‰Šé™¤
				if (storedTheme === 'light') {
					// ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ˜ç¤ºçš„ã«ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰ã‚’é¸æŠ
					document.documentElement.classList.remove('dark');
				} else if (storedTheme === 'dark') {
					// ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ˜ç¤ºçš„ã«ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã‚’é¸æŠ
					document.documentElement.classList.add('dark');
				} else if (!prefersDark) {
					// localStorageæœªè¨­å®š & ã‚·ã‚¹ãƒ†ãƒ ãŒãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰ â†’ ã‚·ã‚¹ãƒ†ãƒ è¨­å®šã‚’å°Šé‡
					document.documentElement.classList.remove('dark');
				} else {
					// ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰: ã‚·ã‚¹ãƒ†ãƒ ãŒãƒ€ãƒ¼ã‚¯ã¾ãŸã¯æœªè¨­å®šã®å ´åˆ
					document.documentElement.classList.add('dark');
				}
			})();
		</script>

		<!-- SEOãƒ¡ã‚¿ã‚¿ã‚°ãƒ»OGPãƒ»Twitter Cardãƒ»JSON-LD (NFR-101ï½NFR-104) -->
		<title>{title}</title>
		<SEO
			title={title}
			description={description}
			url={url}
			type={type}
			image={image}
			publishedTime={publishedTime}
			modifiedTime={modifiedTime}
			tags={tags}
			canonicalUrl={canonicalUrl}
			noindex={noindex}
		/>

		<!-- RSS Feed (REQ-401) -->
		<link
			rel="alternate"
			type="application/rss+xml"
			title="aging-engineer RSS Feed"
			href="/rss.xml"
		/>

    <link rel="icon" href={`${faviconBase}/favicon.ico`} sizes="any">
    <link rel="icon" type="image/png" sizes="32x32" href={`${faviconBase}/favicon-32x32.png`}>
    <link rel="icon" type="image/png" sizes="16x16" href={`${faviconBase}/favicon-16x16.png`}>

    <link rel="apple-touch-icon" href={`${faviconBase}/apple-touch-icon.png`}>

    <link rel="mask-icon" href={`${faviconBase}/safari-pinned-tab.svg`} color="#000000">

    <link rel="manifest" href={`${faviconBase}/site.webmanifest`}>
    <meta name="theme-color" content="#000000">
	</head>
	<body class="bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100">
		<!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ (NFR-301: ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯HTML) -->
		<main class="min-h-screen">
			<slot />
		</main>
	</body>
</html>
