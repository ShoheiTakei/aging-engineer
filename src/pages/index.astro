---
/**
 * ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ï¼ˆè¨˜äº‹ä¸€è¦§ï¼‰
 *
 * è¦ä»¶:
 * - TASK-0011: ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã«è¨˜äº‹ä¸€è¦§ã‚’å®Ÿè£…
 * - æœ€æ–°5ä»¶ã®è¨˜äº‹ã‚’è¡¨ç¤º
 * - /blog/1ï¼ˆå…¨è¨˜äº‹ä¸€è¦§ï¼‰ã¸ã®ãƒªãƒ³ã‚¯ã‚’è¿½åŠ 
 * - SEOå¯¾å¿œï¼ˆtitle, description, OGPï¼‰
 *
 * ä¿¡é ¼æ€§: ğŸ”µ ã‚¿ã‚¹ã‚¯å®šç¾©ã‚ˆã‚Š
 */

import { getCollection } from 'astro:content';
import BlogCard from '../components/BlogCard.astro';
import BaseLayout from '../layouts/BaseLayout.astro';

// å…¨ãƒ–ãƒ­ã‚°è¨˜äº‹ã‚’å–å¾—ï¼ˆä¸‹æ›¸ãã‚’é™¤å¤–ã€å…¬é–‹æ—¥é™é †ï¼‰
const allPosts = await getCollection('blog', ({ data }) => !data.draft);

// å…¬é–‹æ—¥ã§é™é †ã‚½ãƒ¼ãƒˆ
const sortedPosts = allPosts.sort((a, b) => b.data.pubDate.getTime() - a.data.pubDate.getTime());

// æœ€æ–°5ä»¶ã‚’å–å¾—
const latestPosts = sortedPosts.slice(0, 5);
---

<BaseLayout
  title="Aging Engineer Blog"
  description="ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã«é–¢ã™ã‚‹ãƒ–ãƒ­ã‚°ã€‚ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã€æŠ€è¡“ãƒˆãƒ”ãƒƒã‚¯ã€é–‹ç™ºãƒã‚¦ãƒã‚¦ã‚’ç™ºä¿¡ã—ã¾ã™ã€‚"
  type="website"
>
  <div class="container-narrow py-12">
    <!-- ãƒšãƒ¼ã‚¸ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <header class="mb-12">
      <h1 class="text-4xl font-bold mb-4">Aging Engineer Blog</h1>
      <p class="text-lg text-gray-600 dark:text-gray-400">
        ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã«é–¢ã™ã‚‹ãƒ–ãƒ­ã‚°ã€‚ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã€æŠ€è¡“ãƒˆãƒ”ãƒƒã‚¯ã€é–‹ç™ºãƒã‚¦ãƒã‚¦ã‚’ç™ºä¿¡ã—ã¾ã™ã€‚
      </p>
    </header>

    <!-- æœ€æ–°è¨˜äº‹ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
    <section class="mb-12">
      <h2 class="text-2xl font-bold mb-6">æœ€æ–°è¨˜äº‹</h2>

      {latestPosts.length === 0 ? (
        <p class="text-gray-600 dark:text-gray-400">è¨˜äº‹ã¯ã¾ã ã‚ã‚Šã¾ã›ã‚“ã€‚</p>
      ) : (
        <ul class="grid gap-6 md:grid-cols-2" role="list" aria-label="æœ€æ–°è¨˜äº‹ä¸€è¦§">
          {latestPosts.map((post) => (
            <li>
              <BlogCard
                href={`/blog/${post.id}`}
                title={post.data.title}
                description={post.data.description}
                coverImage={post.data.coverImage}
                tags={post.data.tags}
                pubDate={post.data.pubDate}
              />
            </li>
          ))}
        </ul>
      )}
    </section>

    <!-- å…¨è¨˜äº‹ä¸€è¦§ã¸ã®ãƒªãƒ³ã‚¯ -->
    <div class="text-center">
      <a
        href="/blog/1"
        class="inline-block px-6 py-3 bg-blue-600 dark:bg-blue-700 text-white font-semibold rounded-lg hover:bg-blue-700 dark:hover:bg-blue-800 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 transition-colors duration-200"
      >
        ã™ã¹ã¦ã®è¨˜äº‹ã‚’è¦‹ã‚‹
      </a>
    </div>
  </div>
</BaseLayout>
