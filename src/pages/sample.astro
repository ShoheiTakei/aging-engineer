---
import { getCollection } from 'astro:content';
import BaseLayout from '../layouts/BaseLayout.astro';

// 型推論の動作確認
const allPosts = await getCollection('blog');

// TypeScriptによる型チェック（型安全性を確認）
allPosts.forEach((post) => {
	const title: string = post.data.title; // ✅ 型安全
	const tags: string[] = post.data.tags; // ✅ 型安全
	const draft: boolean = post.data.draft; // ✅ 型安全
});
---

<BaseLayout
	title="Content Collections 動作確認"
	description="Astro Content CollectionsとBaseLayoutコンポーネントの統合デモ"
	ogType="website"
>
	<div class="container-narrow py-8">
		<h1 class="text-3xl font-bold mb-6">Content Collections 動作確認</h1>

		<section class="mb-8">
			<h2 class="text-xl font-semibold mb-4">ブログ記事一覧</h2>
			<ul class="space-y-2">
				{
					allPosts.map((post) => (
						<li class="border-b pb-2">
							<span class="font-medium">{post.data.title}</span>
							<span class="text-gray-600 dark:text-gray-400">
								{' '}
								- {post.data.tags.join(', ')}
							</span>
						</li>
					))
				}
			</ul>
		</section>

		<section class="mt-8 p-4 bg-gray-100 dark:bg-gray-800 rounded">
			<h2 class="text-lg font-semibold mb-2">確認項目</h2>
			<ul class="list-disc list-inside space-y-1 text-sm">
				<li>BaseLayoutのセマンティックHTML構造</li>
				<li>SEOメタタグ（ブラウザタブタイトル確認）</li>
				<li>Content Collectionsデータの表示</li>
				<li>Tailwind CSSスタイル適用</li>
				<li>ダークモード対応</li>
			</ul>
		</section>
	</div>
</BaseLayout>
